# @ldesign/git

LDesign Git å·¥å…· - åŠŸèƒ½å¼ºå¤§çš„ Git æ“ä½œæ’ä»¶ï¼Œæä¾›å®Œæ•´çš„ Git æ“ä½œã€é«˜çº§è‡ªåŠ¨åŒ–ã€å·¥ä½œæµé›†æˆå’Œä¸°å¯Œçš„ç»Ÿè®¡åˆ†æåŠŸèƒ½ã€‚

## âœ¨ ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸš€ å®Œå–„çš„ Git åŸºç¡€æ“ä½œï¼ˆåˆ†æ”¯ã€æ ‡ç­¾ã€æš‚å­˜ã€åˆå¹¶ã€å˜åŸºï¼‰
- ğŸŒ¿ å¼ºå¤§çš„åˆ†æ”¯ç®¡ç†ï¼ˆåˆ›å»ºã€åˆ é™¤ã€é‡å‘½åã€æ¯”è¾ƒã€è·Ÿè¸ªï¼‰
- ğŸ·ï¸ å…¨é¢çš„æ ‡ç­¾ç®¡ç†ï¼ˆè½»é‡çº§/æ³¨é‡Šæ ‡ç­¾ã€ç‰ˆæœ¬ç®¡ç†ï¼‰
- ğŸ’¾ çµæ´»çš„æš‚å­˜åŒºç®¡ç†ï¼ˆstash æ“ä½œï¼‰
- ğŸ”€ æ™ºèƒ½çš„åˆå¹¶ä¸å˜åŸºï¼ˆå†²çªæ£€æµ‹ã€å¤šç§ç­–ç•¥ï¼‰

### é«˜çº§è‡ªåŠ¨åŒ–
- ğŸ¤– æ™ºèƒ½æäº¤ç³»ç»Ÿï¼ˆè‡ªåŠ¨åˆ†æå˜æ›´ï¼Œç”Ÿæˆè§„èŒƒçš„æäº¤ä¿¡æ¯ï¼‰
- ğŸ”„ å·¥ä½œæµè‡ªåŠ¨åŒ–ï¼ˆGit Flowã€GitHub Flowã€GitLab Flowï¼‰
- ğŸ“¦ æ‰¹é‡æ“ä½œï¼ˆæ‰¹é‡åˆ†æ”¯ã€æ ‡ç­¾ã€åˆå¹¶ï¼‰
- ğŸ‘€ ä»£ç å®¡æŸ¥è¾…åŠ©ï¼ˆå˜æ›´æ‘˜è¦ã€å½±å“åˆ†æï¼‰

### Git Hooks
- ğŸª Hooks ç®¡ç†å™¨ï¼ˆå®‰è£…ã€é…ç½®ã€ç®¡ç† Git Hooksï¼‰
- ğŸ“ æäº¤ä¿¡æ¯éªŒè¯
- ğŸ§ª é¢„æäº¤æ£€æŸ¥
- ğŸ“‹ ä¸°å¯Œçš„ Hook æ¨¡æ¿åº“

### å­æ¨¡å—ä¸å†²çª
- ğŸ“ å­æ¨¡å—ç®¡ç†ï¼ˆæ·»åŠ ã€æ›´æ–°ã€åˆ é™¤ã€åŒæ­¥ï¼‰
- âš”ï¸ å†²çªè§£æå™¨ï¼ˆæ£€æµ‹å†²çªã€æ™ºèƒ½è§£å†³ã€æ“ä½œå‘å¯¼ï¼‰

### ç»Ÿè®¡åˆ†æ
- ğŸ“Š è¯¦ç»†çš„æäº¤åˆ†æï¼ˆæŒ‰ä½œè€…ã€æ—¶é—´ã€ç±»å‹ç»Ÿè®¡ï¼‰
- ğŸ“ˆ ä»“åº“åˆ†æï¼ˆæ–‡ä»¶å˜æ›´ã€ä»£ç è¶‹åŠ¿ã€åˆ†æ”¯ç”Ÿå‘½å‘¨æœŸï¼‰
- ğŸ“„ å¤šæ ¼å¼æŠ¥å‘Šç”Ÿæˆï¼ˆMarkdownã€JSONã€CSVã€HTMLï¼‰

### CLI å·¥å…·
- ğŸ’» ä¸°å¯Œçš„å‘½ä»¤è¡Œå·¥å…·
- ğŸ¨ ç¾åŒ–çš„è¾“å‡ºï¼ˆé¢œè‰²ã€è¡¨æ ¼ã€è¿›åº¦æ¡ï¼‰
- ğŸ¤ äº¤äº’å¼æ“ä½œ

### ğŸ†• æ–°å¢åŠŸèƒ½ï¼ˆv0.3.0ï¼‰
- ğŸ”§ **é…ç½®ç®¡ç†å™¨** - å®Œæ•´çš„ Git é…ç½®æ“ä½œï¼ˆlocal/global/systemï¼‰
- ğŸ“¦ **Stash ç®¡ç†å™¨** - å¼ºå¤§çš„æš‚å­˜åŒºç®¡ç†ï¼ˆsave/pop/apply/listï¼‰
- ğŸŒ **Remote ç®¡ç†å™¨** - è¿œç¨‹ä»“åº“å®Œæ•´æ“ä½œï¼ˆadd/remove/fetch/pruneï¼‰
- ğŸ“Š **Diff ç®¡ç†å™¨** - å…¨é¢çš„å·®å¼‚æ¯”è¾ƒï¼ˆcommits/branches/filesï¼‰
- ğŸŒ³ **Worktree ç®¡ç†å™¨** - å¤šå·¥ä½œæ ‘æ”¯æŒï¼ˆadd/remove/move/lockï¼‰
- ğŸ“ **Changelog ç”Ÿæˆå™¨** - åŸºäº Conventional Commits çš„å˜æ›´æ—¥å¿—
- ğŸš¨ **ç»Ÿä¸€é”™è¯¯å¤„ç†** - å®Œæ•´çš„é”™è¯¯ç±»å‹ç³»ç»Ÿå’Œç±»å‹å®ˆå«
- ğŸ“‹ **æ—¥å¿—ç³»ç»Ÿ** - å¤šçº§åˆ«æ—¥å¿—æ”¯æŒå’Œè‡ªå®šä¹‰è¾“å‡º
- âš¡ **LRU ç¼“å­˜** - æ™ºèƒ½ç¼“å­˜æœºåˆ¶ï¼Œæ˜¾è‘—æå‡æ€§èƒ½
- ğŸ”— **ä¾èµ–æ³¨å…¥** - GitContext ç»Ÿä¸€ç®¡ç†å…±äº«èµ„æº

## ğŸ“¦ å®‰è£…

```bash
pnpm add @ldesign/git
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºç¡€æ“ä½œ

```typescript
import { GitManager, BranchManager, TagManager } from '@ldesign/git'

// åˆå§‹åŒ–
const git = new GitManager({ baseDir: './my-project' })

// åŸºç¡€æ“ä½œ
await git.init()
await git.add('.')
await git.commit('feat: initial commit')
await git.push('origin', 'main')

// åˆ†æ”¯ç®¡ç†
const branchManager = new BranchManager({ baseDir: './my-project' })
await branchManager.createBranch('feature/new-feature')
await branchManager.checkoutBranch('feature/new-feature')
const branches = await branchManager.listBranches()

// æ ‡ç­¾ç®¡ç†
const tagManager = new TagManager({ baseDir: './my-project' })
await tagManager.createAnnotatedTag('v1.0.0', 'Release version 1.0.0')
await tagManager.pushTag('v1.0.0')
```

### æ™ºèƒ½æäº¤

```typescript
import { SmartCommit } from '@ldesign/git'

const smartCommit = new SmartCommit({ baseDir: './my-project' })

// è‡ªåŠ¨åˆ†æå˜æ›´å¹¶ç”Ÿæˆæäº¤ä¿¡æ¯
const suggestions = await smartCommit.analyzeChanges()
console.log('å»ºè®®çš„æäº¤ç±»å‹:', suggestions[0].type)

// æ™ºèƒ½æäº¤
await smartCommit.smartCommit({
  autoDetect: true, // è‡ªåŠ¨æ£€æµ‹æäº¤ç±»å‹
  scope: 'user',
  breaking: false
})

// éªŒè¯æäº¤ä¿¡æ¯
const validation = smartCommit.validateCommitMessage('feat(user): add login')
console.log('éªŒè¯ç»“æœ:', validation.valid)
```

### å·¥ä½œæµè‡ªåŠ¨åŒ–

```typescript
import { WorkflowAutomation } from '@ldesign/git'

// Git Flow
const workflow = new WorkflowAutomation(
  WorkflowAutomation.getDefaultConfig('git-flow'),
  { baseDir: './my-project' }
)

// åˆå§‹åŒ– Git Flow
await workflow.initGitFlow()

// å¼€å§‹æ–°åŠŸèƒ½
const featureBranch = await workflow.startFeature({
  name: 'user-authentication',
  push: true
})

// å®ŒæˆåŠŸèƒ½
await workflow.finishFeature('user-authentication')

// å¼€å§‹å‘å¸ƒ
await workflow.startRelease({ version: '1.0.0' })
await workflow.finishRelease('1.0.0')
```

### æ‰¹é‡æ“ä½œ

```typescript
import { BatchOperations } from '@ldesign/git'

const batch = new BatchOperations({ baseDir: './my-project' })

// æ‰¹é‡åˆ›å»ºåˆ†æ”¯
const result = await batch.createBranches([
  'feature/feature-1',
  'feature/feature-2',
  'feature/feature-3'
])
console.log(`æˆåŠŸ: ${result.succeeded}, å¤±è´¥: ${result.failed}`)

// æ‰¹é‡åˆ é™¤å·²åˆå¹¶çš„åˆ†æ”¯
await batch.cleanupMergedBranches('main', ['main', 'develop'])

// æ‰¹é‡æ¨é€æ ‡ç­¾
await batch.pushTags(['v1.0.0', 'v1.0.1', 'v1.0.2'])
```

### ä»£ç å®¡æŸ¥

```typescript
import { ReviewHelper } from '@ldesign/git'

const reviewer = new ReviewHelper({ baseDir: './my-project' })

// ç”Ÿæˆå®¡æŸ¥æ•°æ®
const reviewData = await reviewer.generateReviewData('main', 'feature/new-feature')

console.log('å˜æ›´æ–‡ä»¶æ•°:', reviewData.changes.files)
console.log('å½±å“çº§åˆ«:', reviewData.impact.level)
console.log('å®¡æŸ¥å»ºè®®:', reviewData.suggestions)

// ç”Ÿæˆ Markdown æŠ¥å‘Š
const report = await reviewer.generateMarkdownReport('main', 'feature/new-feature')
console.log(report)
```

### Hooks ç®¡ç†

```typescript
import { HookManager } from '@ldesign/git'

const hookManager = new HookManager({ baseDir: './my-project' })

// ä»æ¨¡æ¿å®‰è£… hooks
const template = HookManager.getTemplate('commit-msg-validation')
if (template) {
  await hookManager.installFromTemplate(template)
}

// åˆ—å‡ºå·²å®‰è£…çš„ hooks
const installed = await hookManager.listInstalledHooks()
console.log('å·²å®‰è£…çš„ Hooks:', installed)

// ç¦ç”¨/å¯ç”¨ hook
await hookManager.disableHook('pre-commit')
await hookManager.enableHook('pre-commit')
```

### å­æ¨¡å—ç®¡ç†

```typescript
import { SubmoduleManager } from '@ldesign/git'

const submodule = new SubmoduleManager({ baseDir: './my-project' })

// æ·»åŠ å­æ¨¡å—
await submodule.addSubmodule(
  'https://github.com/user/repo.git',
  'libs/external',
  { branch: 'main' }
)

// åˆå§‹åŒ–å¹¶æ›´æ–°æ‰€æœ‰å­æ¨¡å—
await submodule.initSubmodules(true)
await submodule.updateSubmodules({ recursive: true })

// åˆ—å‡ºæ‰€æœ‰å­æ¨¡å—
const submodules = await submodule.listSubmodules()
console.log('å­æ¨¡å—:', submodules)
```

### å†²çªè§£å†³

```typescript
import { ConflictResolver } from '@ldesign/git'

const resolver = new ConflictResolver({ baseDir: './my-project' })

// æ£€æµ‹å†²çª
const conflicts = await resolver.detectConflicts()
console.log('å†²çªæ–‡ä»¶æ•°:', conflicts.length)

// è§£å†³å†²çª - ä½¿ç”¨æˆ‘ä»¬çš„ç‰ˆæœ¬
await resolver.resolveWithOurs('src/app.ts')

// è§£å†³å†²çª - ä½¿ç”¨ä»–ä»¬çš„ç‰ˆæœ¬
await resolver.resolveWithTheirs('src/utils.ts')

// ç”Ÿæˆå†²çªæŠ¥å‘Š
const report = await resolver.generateConflictReport()
console.log(report)

// ç»§ç»­å½“å‰æ“ä½œ
await resolver.continueCurrentOperation()
```

### ğŸ†• æ–°å¢ç®¡ç†å™¨ï¼ˆv0.3.0ï¼‰

#### Stash ç®¡ç†å™¨

```typescript
import { StashManager } from '@ldesign/git'

const stashManager = new StashManager({ baseDir: './my-project' })

// ä¿å­˜å½“å‰æ›´æ”¹
await stashManager.save({ message: 'WIP: ä¸´æ—¶ä¿å­˜', includeUntracked: true })

// åˆ—å‡ºæ‰€æœ‰ stash
const stashes = await stashManager.list()

// åº”ç”¨æœ€æ–°çš„ stash
await stashManager.apply()

// å¼¹å‡ºå¹¶åˆ é™¤ stash
await stashManager.pop()

// ä» stash åˆ›å»ºåˆ†æ”¯
await stashManager.branch('feature/from-stash', 0)
```

#### Remote ç®¡ç†å™¨

```typescript
import { RemoteManager } from '@ldesign/git'

const remoteManager = new RemoteManager({ baseDir: './my-project' })

// æ·»åŠ è¿œç¨‹ä»“åº“
await remoteManager.add('origin', 'https://github.com/user/repo.git')

// åˆ—å‡ºæ‰€æœ‰è¿œç¨‹
const remotes = await remoteManager.list()

// è®¾ç½® URL
await remoteManager.setUrl('origin', 'https://github.com/user/new-repo.git')

// Fetch å¹¶æ¸…ç†
await remoteManager.fetch('origin', { prune: true })
await remoteManager.prune('origin')
```

#### Diff ç®¡ç†å™¨

```typescript
import { DiffManager } from '@ldesign/git'

const diffManager = new DiffManager({ baseDir: './my-project' })

// æ¯”è¾ƒä¸¤ä¸ªæäº¤
const diff = await diffManager.diffCommits('HEAD~5', 'HEAD')
console.log(`å˜æ›´äº† ${diff.files.length} ä¸ªæ–‡ä»¶`)

// æ¯”è¾ƒåˆ†æ”¯
const branchDiff = await diffManager.diffBranches('main', 'develop')
console.log(`${branchDiff.commits.length} ä¸ªæäº¤`)

// è·å–å·¥ä½œåŒºå˜æ›´
const workingDiff = await diffManager.diffWorkingDirectory()

// æŸ¥çœ‹æ–‡ä»¶ diff
const fileDiff = await diffManager.showFileDiff('src/index.ts')
```

#### Git Config ç®¡ç†å™¨

```typescript
import { GitConfigManager } from '@ldesign/git'

const configManager = new GitConfigManager({ baseDir: './my-project' })

// è®¾ç½®ç”¨æˆ·ä¿¡æ¯
await configManager.setUserInfo('John Doe', 'john@example.com', 'global')

// è·å–é…ç½®
const email = await configManager.get('user.email')

// åˆ—å‡ºæ‰€æœ‰é…ç½®
const configs = await configManager.list('global')

// è®¾ç½®è‡ªå®šä¹‰é…ç½®
await configManager.set('core.editor', 'code --wait', 'global')
```

#### Worktree ç®¡ç†å™¨

```typescript
import { WorktreeManager } from '@ldesign/git'

const worktreeManager = new WorktreeManager({ baseDir: './my-project' })

// æ·»åŠ æ–°å·¥ä½œæ ‘
await worktreeManager.add('../my-project-feature', 'feature/new-feature')

// åˆ—å‡ºæ‰€æœ‰å·¥ä½œæ ‘
const worktrees = await worktreeManager.list()

// é”å®šå·¥ä½œæ ‘
await worktreeManager.lock('../my-project-feature', 'æ­£åœ¨è¿›è¡Œé‡è¦å·¥ä½œ')

// ç§»é™¤å·¥ä½œæ ‘
await worktreeManager.remove('../my-project-feature')
```

#### Changelog ç”Ÿæˆå™¨

```typescript
import { ChangelogGenerator } from '@ldesign/git'

const changelogGen = new ChangelogGenerator({ baseDir: './my-project' })

// ç”Ÿæˆç‰¹å®šç‰ˆæœ¬çš„ changelog
const changelog = await changelogGen.generateForVersion('1.1.0')
console.log(changelog)

// æ›´æ–° CHANGELOG.md
await changelogGen.update('1.1.0')

// ç”Ÿæˆè‡ªå®šä¹‰èŒƒå›´çš„ changelog
const customChangelog = await changelogGen.generate({
  from: 'v1.0.0',
  to: 'v1.1.0',
  grouped: true,
  outputFile: 'CHANGELOG.md'
})
```

#### é”™è¯¯å¤„ç†å’Œæ—¥å¿—

```typescript
import { 
  GitLogger, 
  LogLevel,
  GitBranchError,
  isGitBranchError 
} from '@ldesign/git'

// ä½¿ç”¨æ—¥å¿—ç³»ç»Ÿ
const logger = new GitLogger({ level: LogLevel.DEBUG })
logger.info('æ“ä½œå¼€å§‹')
logger.error('æ“ä½œå¤±è´¥', error)

// é”™è¯¯å¤„ç†
try {
  await branchManager.deleteBranch('feature/test')
} catch (error) {
  if (isGitBranchError(error)) {
    console.error(`åˆ†æ”¯æ“ä½œå¤±è´¥: ${error.branch}`)
    console.error(`é”™è¯¯ä»£ç : ${error.code}`)
  }
}
```

#### GitContextï¼ˆä¾èµ–æ³¨å…¥ï¼‰

```typescript
import { GitContext, LogLevel } from '@ldesign/git'

// åˆ›å»ºç»Ÿä¸€çš„ä¸Šä¸‹æ–‡
const context = new GitContext({
  baseDir: './my-project',
  logLevel: LogLevel.INFO,
  enableCache: true,
  cacheMaxSize: 200
})

// è·å–å…±äº«èµ„æº
const git = context.getGit()
const logger = context.getLogger()
const cache = context.getCache()

// æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
const cacheStats = context.getCacheStats()
console.log(`ç¼“å­˜å‘½ä¸­ç‡: ${(cacheStats.hitRate * 100).toFixed(2)}%`)
```

### ç»Ÿè®¡åˆ†æ

```typescript
import { CommitAnalyzer, RepositoryAnalyzer, ReportGenerator } from '@ldesign/git'

// æäº¤åˆ†æ
const commitAnalyzer = new CommitAnalyzer({ baseDir: './my-project' })
const analytics = await commitAnalyzer.analyzeCommitsDetailed()

console.log('æ€»æäº¤æ•°:', analytics.totalCommits)
console.log('æäº¤ç±»å‹åˆ†å¸ƒ:', analytics.commitsByType)
console.log('Top è´¡çŒ®è€…:', analytics.topContributors)

// ä»“åº“åˆ†æ
const repoAnalyzer = new RepositoryAnalyzer({ baseDir: './my-project' })
const metrics = await repoAnalyzer.analyzeRepository()

console.log('è¯­è¨€åˆ†å¸ƒ:', metrics.languageDistribution)
console.log('æœ€å¸¸å˜æ›´çš„æ–‡ä»¶:', metrics.mostChangedFiles)
console.log('åˆ†æ”¯ç»Ÿè®¡:', metrics.branchMetrics)

// ç”ŸæˆæŠ¥å‘Š
const reportGen = new ReportGenerator({ baseDir: './my-project' })

// Markdown æŠ¥å‘Š
const mdReport = await reportGen.generateMarkdownReport()
console.log(mdReport)

// JSON æŠ¥å‘Š
const jsonReport = await reportGen.generateJsonReport()

// HTML æŠ¥å‘Š
const htmlReport = await reportGen.generateHtmlReport()
```

### é…ç½®ç®¡ç†

```typescript
import { ConfigManager } from '@ldesign/git'

const config = new ConfigManager({ baseDir: './my-project' })

// åŠ è½½é…ç½®
const userConfig = await config.loadConfig()

// æ›´æ–°é…ç½®
await config.updateConfig({
  preferences: {
    autoStash: true,
    autoFetch: true,
    defaultBranch: 'main'
  }
})

// æ·»åŠ è‡ªå®šä¹‰ä½œç”¨åŸŸ
await config.addScope('user')
await config.addScope('auth')

// æ·»åŠ åˆ«å
await config.addAlias('st', 'status')
await config.addAlias('co', 'checkout')
```

### éªŒè¯å·¥å…·

```typescript
import { validateBranchName, validateCommitMessage, validateTagName } from '@ldesign/git'

// éªŒè¯åˆ†æ”¯å
const branchValidation = validateBranchName('feature/user-login')
if (!branchValidation.valid) {
  console.error('åˆ†æ”¯åé”™è¯¯:', branchValidation.errors)
}
if (branchValidation.suggestion) {
  console.log('å»ºè®®:', branchValidation.suggestion)
}

// éªŒè¯æäº¤ä¿¡æ¯
const commitValidation = validateCommitMessage('feat(user): add login feature')
if (commitValidation.valid) {
  console.log('è§£æç»“æœ:', commitValidation.parsed)
}

// éªŒè¯æ ‡ç­¾å
const tagValidation = validateTagName('v1.0.0')
console.log('æ ‡ç­¾éªŒè¯:', tagValidation.valid)
```

## ğŸ“š API æ–‡æ¡£

### æ ¸å¿ƒæ¨¡å—

#### GitManager
åŸºç¡€ Git æ“ä½œç®¡ç†å™¨

- `init()` - åˆå§‹åŒ–ä»“åº“
- `add(files)` - æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº
- `commit(message)` - æäº¤æ›´æ”¹
- `push(remote, branch)` - æ¨é€åˆ°è¿œç¨‹
- `pull(remote, branch)` - ä»è¿œç¨‹æ‹‰å–
- `status()` - è·å–ä»“åº“çŠ¶æ€
- `log(options)` - è·å–æäº¤å†å²
- `clone(url, path)` - å…‹éš†ä»“åº“
- `getCurrentBranch()` - è·å–å½“å‰åˆ†æ”¯
- `addRemote(name, url)` - æ·»åŠ è¿œç¨‹ä»“åº“

#### BranchManager
åˆ†æ”¯ç®¡ç†å™¨

- `listBranches()` - åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯
- `createBranch(name, startPoint?)` - åˆ›å»ºåˆ†æ”¯
- `deleteBranch(name, force?)` - åˆ é™¤åˆ†æ”¯
- `checkoutBranch(name, options?)` - åˆ‡æ¢åˆ†æ”¯
- `renameBranch(oldName, newName)` - é‡å‘½ååˆ†æ”¯
- `compareBranches(branch1, branch2)` - æ¯”è¾ƒåˆ†æ”¯
- `isMerged(branch, target?)` - æ£€æŸ¥æ˜¯å¦å·²åˆå¹¶
- `pushBranch(name, remote, setUpstream?)` - æ¨é€åˆ†æ”¯
- `getMergedBranches(target?)` - è·å–å·²åˆå¹¶åˆ†æ”¯
- `getUnmergedBranches(target?)` - è·å–æœªåˆå¹¶åˆ†æ”¯

#### TagManager
æ ‡ç­¾ç®¡ç†å™¨

- `createLightweightTag(name, ref?)` - åˆ›å»ºè½»é‡çº§æ ‡ç­¾
- `createAnnotatedTag(name, message, ref?)` - åˆ›å»ºæ³¨é‡Šæ ‡ç­¾
- `deleteTag(name)` - åˆ é™¤æœ¬åœ°æ ‡ç­¾
- `deleteRemoteTag(name, remote?)` - åˆ é™¤è¿œç¨‹æ ‡ç­¾
- `listTags()` - åˆ—å‡ºæ‰€æœ‰æ ‡ç­¾
- `getTagInfo(name)` - è·å–æ ‡ç­¾ä¿¡æ¯
- `pushTag(name, remote?)` - æ¨é€æ ‡ç­¾
- `pushAllTags(remote?)` - æ¨é€æ‰€æœ‰æ ‡ç­¾
- `getLatestTag()` - è·å–æœ€æ–°æ ‡ç­¾

#### StashManager
æš‚å­˜åŒºç®¡ç†å™¨

- `stash(options?)` - ä¿å­˜åˆ° stash
- `apply(index?)` - åº”ç”¨ stash
- `pop(index?)` - åº”ç”¨å¹¶åˆ é™¤ stash
- `list()` - åˆ—å‡ºæ‰€æœ‰ stash
- `drop(index)` - åˆ é™¤ stash
- `clear()` - æ¸…ç©ºæ‰€æœ‰ stash
- `branch(branchName, index)` - ä» stash åˆ›å»ºåˆ†æ”¯

#### MergeManager
åˆå¹¶ç®¡ç†å™¨

- `merge(branch, options?)` - åˆå¹¶åˆ†æ”¯
- `rebase(branch, options?)` - å˜åŸº
- `cherryPick(commit, options?)` - Cherry-pick
- `getConflicts()` - è·å–å†²çªåˆ—è¡¨
- `resolveWithOurs(file)` - ä½¿ç”¨æˆ‘ä»¬çš„ç‰ˆæœ¬
- `resolveWithTheirs(file)` - ä½¿ç”¨ä»–ä»¬çš„ç‰ˆæœ¬
- `abortMerge()` - ä¸­æ­¢åˆå¹¶
- `continueMerge()` - ç»§ç»­åˆå¹¶

è¯¦ç»†æ–‡æ¡£è¯·æŸ¥çœ‹å„æ¨¡å—çš„ TypeScript ç±»å‹å®šä¹‰å’Œæºä»£ç æ³¨é‡Šã€‚

## ğŸ› ï¸ CLI å·¥å…·

### åŸºç¡€å‘½ä»¤

```bash
# æŸ¥çœ‹å¸®åŠ©
ldesign-git --help

# æŸ¥çœ‹ç‰ˆæœ¬
ldesign-git --version

# æŸ¥çœ‹çŠ¶æ€ï¼ˆç¾åŒ–è¾“å‡ºï¼‰
ldesign-git status
ldesign-git st  # åˆ«å

# åˆå§‹åŒ–ä»“åº“
ldesign-git init
```

### åˆ†æ”¯ç®¡ç†

```bash
# åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯
ldesign-git branch list
ldesign-git branch ls      # åˆ«å
ldesign-git branch list -r # åªæ˜¾ç¤ºè¿œç¨‹åˆ†æ”¯
ldesign-git branch list -a # æ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯

# åˆ›å»ºåˆ†æ”¯
ldesign-git branch create feature/new-feature
ldesign-git branch create feature/new-feature -c  # åˆ›å»ºå¹¶åˆ‡æ¢
ldesign-git branch create hotfix/bug -s main     # ä» main åˆ›å»º

# åˆ é™¤åˆ†æ”¯
ldesign-git branch delete feature/old-feature
ldesign-git branch del feature/old-feature -f    # å¼ºåˆ¶åˆ é™¤
ldesign-git branch delete feature/old -r         # åˆ é™¤è¿œç¨‹åˆ†æ”¯

# é‡å‘½ååˆ†æ”¯
ldesign-git branch rename old-name new-name
ldesign-git branch rename old-name new-name -f   # å¼ºåˆ¶é‡å‘½å

# æ¯”è¾ƒåˆ†æ”¯
ldesign-git branch compare main feature/new-feature

# æ¸…ç†å·²åˆå¹¶åˆ†æ”¯
ldesign-git branch cleanup
ldesign-git branch cleanup --dry-run             # é¢„è§ˆæ¨¡å¼
ldesign-git branch cleanup -t develop            # æŒ‡å®šç›®æ ‡åˆ†æ”¯

# åˆ‡æ¢åˆ†æ”¯
ldesign-git branch checkout feature/new-feature
ldesign-git branch co feature/new-feature        # åˆ«å
ldesign-git branch co new-branch -b              # åˆ›å»ºå¹¶åˆ‡æ¢
```

### æ ‡ç­¾ç®¡ç†

```bash
# åˆ—å‡ºæ‰€æœ‰æ ‡ç­¾
ldesign-git tag list
ldesign-git tag ls         # åˆ«å
ldesign-git tag list -s    # æŒ‰ç‰ˆæœ¬å·æ’åº
ldesign-git tag list -p "v1.*"  # æ¨¡å¼åŒ¹é…

# åˆ›å»ºæ ‡ç­¾
ldesign-git tag create v1.0.0
ldesign-git tag create v1.0.0 -a -m "Release 1.0"  # æ³¨é‡Šæ ‡ç­¾
ldesign-git tag create v1.0.1 -r abc123            # æŒ‡å®šæäº¤

# åˆ é™¤æ ‡ç­¾
ldesign-git tag delete v0.9.0
ldesign-git tag del v0.9.0 -r     # åˆ é™¤è¿œç¨‹æ ‡ç­¾

# æ¨é€æ ‡ç­¾
ldesign-git tag push v1.0.0
ldesign-git tag push --all        # æ¨é€æ‰€æœ‰æ ‡ç­¾

# æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯
ldesign-git tag info v1.0.0

# æŸ¥çœ‹æœ€æ–°æ ‡ç­¾
ldesign-git tag latest
```

### æ™ºèƒ½æäº¤

```bash
# æ™ºèƒ½æäº¤ï¼ˆäº¤äº’å¼ï¼‰
ldesign-git commit smart

# éäº¤äº’æ¨¡å¼ï¼ˆè‡ªåŠ¨ä½¿ç”¨å»ºè®®ï¼‰
ldesign-git commit smart --no-interactive

# éªŒè¯æäº¤ä¿¡æ¯
ldesign-git commit validate "feat(user): add login feature"

# åˆ†æå½“å‰å˜æ›´
ldesign-git commit analyze
```

### CLI ç‰¹æ€§

**ç¾åŒ–è¾“å‡º**
- ğŸ¨ å½©è‰²æ˜¾ç¤ºï¼ˆæˆåŠŸ/é”™è¯¯/è­¦å‘Š/ä¿¡æ¯ï¼‰
- ğŸ“Š è¡¨æ ¼æ ¼å¼åŒ–
- â³ è¿›åº¦æŒ‡ç¤ºå™¨
- ğŸ“¦ ç¾åŒ–çš„æ¶ˆæ¯æ¡†
- âœ¨ ç»Ÿä¸€çš„å›¾æ ‡ç³»ç»Ÿ

**äº¤äº’å¼æ“ä½œ**
- âœ… ç¡®è®¤æç¤ºï¼ˆåˆ é™¤æ“ä½œï¼‰
- ğŸ“ æ™ºèƒ½è¾“å…¥è¡¨å•
- ğŸ¯ è‡ªåŠ¨é»˜è®¤å€¼
- âœ”ï¸ è¾“å…¥éªŒè¯

**ç”¨æˆ·ä½“éªŒ**
- è¯¦ç»†çš„æ“ä½œåé¦ˆ
- å‹å¥½çš„é”™è¯¯æç¤º
- æ‰¹é‡æ“ä½œæ”¯æŒ
- Dry-run é¢„è§ˆæ¨¡å¼

### å·¥ä½œæµç®¡ç†

```bash
# åˆå§‹åŒ–å·¥ä½œæµ
ldesign-git workflow init
ldesign-git workflow init git-flow    # ç›´æ¥æŒ‡å®šç±»å‹

# åŠŸèƒ½åˆ†æ”¯ç®¡ç†ï¼ˆGit Flowï¼‰
ldesign-git workflow feature start <name>
ldesign-git workflow feature finish <name>

# å‘å¸ƒç®¡ç†
ldesign-git workflow release start <version>
ldesign-git workflow release finish <version>

# çƒ­ä¿®å¤ç®¡ç†
ldesign-git workflow hotfix start <name>
ldesign-git workflow hotfix finish <name> -v <version>
```

### ä»“åº“åˆ†æ

```bash
# æäº¤åˆ†æ
ldesign-git analyze commits
ldesign-git analyze commits -n 500           # æŒ‡å®šæ•°é‡
ldesign-git analyze commits --author "John"  # ç‰¹å®šä½œè€…

# è´¡çŒ®è€…åˆ†æ
ldesign-git analyze contributors
ldesign-git analyze contributors -l 20       # Top 20

# ä»“åº“åˆ†æ
ldesign-git analyze repository

# ç”ŸæˆæŠ¥å‘Š
ldesign-git report
ldesign-git report -f markdown -o report.md  # Markdown æ ¼å¼
ldesign-git report -f json -o data.json      # JSON æ ¼å¼
ldesign-git report -f html -o report.html    # HTML æ ¼å¼
```

### å†²çªè§£å†³

```bash
# åˆ—å‡ºå†²çª
ldesign-git conflict list

# äº¤äº’å¼è§£å†³
ldesign-git conflict resolve

# æ‰¹é‡è§£å†³
ldesign-git conflict resolve-all --ours      # ä½¿ç”¨æˆ‘ä»¬çš„ç‰ˆæœ¬
ldesign-git conflict resolve-all --theirs    # ä½¿ç”¨ä»–ä»¬çš„ç‰ˆæœ¬

# ä¸­æ­¢æ“ä½œ
ldesign-git conflict abort

# ç”Ÿæˆå†²çªæŠ¥å‘Š
ldesign-git conflict report -o conflicts.md
```

### Hooks ç®¡ç†

```bash
# åˆ—å‡ºå·²å®‰è£…çš„ hooks
ldesign-git hooks list

# æŸ¥çœ‹å¯ç”¨æ¨¡æ¿
ldesign-git hooks templates

# å®‰è£…æ¨¡æ¿
ldesign-git hooks install commit-msg-validation
ldesign-git hooks install pre-commit-lint
ldesign-git hooks install full-workflow

# å¯ç”¨/ç¦ç”¨ hook
ldesign-git hooks enable pre-commit
ldesign-git hooks disable pre-push

# æŸ¥çœ‹ hook å†…å®¹
ldesign-git hooks show commit-msg

# å¤‡ä»½ hooks
ldesign-git hooks backup

# å¸è½½
ldesign-git hooks uninstall pre-commit
ldesign-git hooks uninstall-all
```

## ğŸ“ License

MIT


